<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <div id="app">
    <Btn v-for="(number, i) in numbers" :data="number" @change-data="updateNumber(i, $event)"></Btn>

    <Btn :data="number" @change-data="number=$event"></Btn>

  </div>
  <script src="https://unpkg.com/vue@3"></script>
  <script type="text/x-template" id="Btn">
  <div>
    {{data}}
    <input type="button" value="點" @click="onBtnClick" >
  </div>  
</script>
  <script>
    const { createApp, ref, reactive, toRefs, toRef } = Vue
    createApp({
      setup() {
        const number = ref(500)
        const numbers = reactive([100, 200, 300, 400])
        const updateNumber = (i, event) => {
          numbers[i] = event
        }
        return { number, numbers, updateNumber }
      }
    })
      .component('Btn', {
        template: '#Btn',
        props: ['data'],
        // methods: {
        //   onBtnClick () {
        //     this.$emit('change-data', this.data + 100)
        //   }
        // },
        setup(props, { emit }) {
          // props.data
          const { data } = toRefs(props)
          // const data = toRef(props, 'data')
          const onBtnClick = () => {
            // props 是 readonly，無法直接修改
            // data.value += 100

            // 內層發生一個叫做 change-data 的自訂事件，將新的值傳出
            emit('change-data', data.value + 100)
          }
          return { onBtnClick }
        }
      })
      .mount('#app')
  </script>


</body>

</html>